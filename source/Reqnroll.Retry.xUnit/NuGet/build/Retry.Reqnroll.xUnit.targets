<Project ToolsVersion="12.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <PropertyGroup>
        <!-- Default Retry Count For BDD Tests (Can Be Overridden In Consuming Projects) -->
        <ReqnrollRetryCount Condition="'$(ReqnrollRetryCount)' == ''">1</ReqnrollRetryCount>

        <!-- Path To The Generator Plugin DLL -->
        <_ReqnrollRetryGeneratorPluginPath>$(MSBuildThisFileDirectory)netstandard2.0\Reqnroll.Retry.xUnit.dll</_ReqnrollRetryGeneratorPluginPath>
    </PropertyGroup>

    <Target Name="AddReqnrollRetryGeneratorPlugin" BeforeTargets="CoreProcessReqnrollFeatureFilesInProject" Condition="Exists('$(_ReqnrollRetryGeneratorPluginPath)')">
        <ItemGroup>
            <ReqnrollGeneratorPlugins Include="$(_ReqnrollRetryGeneratorPluginPath)">
                <Parameter_RetryCount>$(ReqnrollRetryCount)</Parameter_RetryCount>
            </ReqnrollGeneratorPlugins>
        </ItemGroup>
    </Target>

    <ItemGroup>
        <!-- xUnit Doesn't Natively Support Retry Because It's A Shit Testing Library, So We Use xRetry -->
        <PackageReference Include="xRetry" Version="*" />
    </ItemGroup>

</Project>
